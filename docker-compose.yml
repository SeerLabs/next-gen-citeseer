version: '2.3'

services:
    server:        
      build: ./server
      container_name: server
      ports:
        - 8000:8000
      volumes:
        - ./server:/api
      environment:
        - RECAPTCHA_SECRET_KEY
      env_file:
        - ./variables/development.env
    client:
      build: ./client
      container_name: client
      restart: always
      command: 'npm run start'
      ports:
        - 3000:3000
      volumes:
          - /app/node_modules
          - ./client:/app
      environment:
          - RECAPTCHA_SITE_KEY
      depends_on:
          - server
      env_file:
        - ./variables/development.env
    nginx:
      container_name: web
      restart: always
      image: nginx:latest
      ports:
        - 8081:8080
      volumes:
        - .:/next-gen-seer
        - ./nginx.conf:/etc/nginx/conf.d/nginx.conf
      depends_on:
        - server
        - client


